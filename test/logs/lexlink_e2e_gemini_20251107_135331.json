{
  "test_name": "lexlink_e2e_gemini",
  "start_time": "2025-11-07T13:53:31.512371",
  "test_config": {
    "oc": "ddongle0205",
    "server_url": "http://127.0.0.1:8081",
    "gemini_available": true
  },
  "mcp_calls": [
    {
      "timestamp": "2025-11-07T13:53:31.527201",
      "method": "initialize",
      "params": {
        "protocolVersion": "2024-11-05",
        "capabilities": {
          "tools": {}
        },
        "clientInfo": {
          "name": "lexlink-test-client",
          "version": "1.0.0"
        }
      },
      "response": {
        "jsonrpc": "2.0",
        "id": 1,
        "result": {
          "protocolVersion": "2024-11-05",
          "capabilities": {
            "experimental": {},
            "prompts": {
              "listChanged": false
            },
            "resources": {
              "subscribe": false,
              "listChanged": false
            },
            "tools": {
              "listChanged": false
            }
          },
          "serverInfo": {
            "name": "LexLink - Korean Law API",
            "version": "1.20.0"
          }
        }
      },
      "elapsed_ms": 2
    },
    {
      "timestamp": "2025-11-07T13:53:31.529040",
      "method": "tools/list",
      "params": {},
      "response": {
        "jsonrpc": "2.0",
        "id": 2,
        "result": {
          "tools": [
            {
              "name": "eflaw_search",
              "description": "\n        Search current laws by effective date (시행일 기준 현행법령 검색).\n\n        This tool searches Korean laws organized by effective date.\n        Use this when you need to find laws that are currently in effect.\n\n        Args:\n            query: Search keyword (law name or content)\n            display: Number of results per page (max 100, default 20)\n            page: Page number (1-based, default 1)\n            oc: Optional OC override (defaults to session config or env)\n            type: Response format - \"HTML\", \"XML\", or \"JSON\" (default \"XML\")\n            sort: Sort order - \"lasc\"|\"ldes\"|\"dasc\"|\"ddes\"|\"nasc\"|\"ndes\"|\"efasc\"|\"efdes\"\n            ef_yd: Effective date range (YYYYMMDD~YYYYMMDD, e.g., \"20240101~20241231\")\n            org: Ministry/department code filter\n            knd: Law type filter\n\n        Returns:\n            Search results with law list or error\n\n        Examples:\n            Search for \"자동차관리법\":\n            >>> eflaw_search(query=\"자동차관리법\", display=10, type=\"JSON\")\n\n            Search with date range:\n            >>> eflaw_search(\n            ...     query=\"자동차\",\n            ...     ef_yd=\"20240101~20241231\",\n            ...     type=\"JSON\"\n            ... )\n        ",
              "inputSchema": {
                "properties": {
                  "query": {
                    "title": "Query",
                    "type": "string"
                  },
                  "display": {
                    "default": 20,
                    "title": "Display",
                    "type": "integer"
                  },
                  "page": {
                    "default": 1,
                    "title": "Page",
                    "type": "integer"
                  },
                  "oc": {
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "null"
                      }
                    ],
                    "default": null,
                    "title": "Oc"
                  },
                  "type": {
                    "default": "XML",
                    "title": "Type",
                    "type": "string"
                  },
                  "sort": {
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "null"
                      }
                    ],
                    "default": null,
                    "title": "Sort"
                  },
                  "ef_yd": {
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "null"
                      }
                    ],
                    "default": null,
                    "title": "Ef Yd"
                  },
                  "org": {
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "null"
                      }
                    ],
                    "default": null,
                    "title": "Org"
                  },
                  "knd": {
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "null"
                      }
                    ],
                    "default": null,
                    "title": "Knd"
                  }
                },
                "required": [
                  "query"
                ],
                "title": "eflaw_searchArguments",
                "type": "object"
              }
            },
            {
              "name": "law_search",
              "description": "\n        Search current laws by announcement date (공포일 기준 현행법령 검색).\n\n        This tool searches Korean laws organized by announcement (publication) date.\n\n        Args:\n            query: Search keyword (law name or content)\n            display: Number of results per page (max 100, default 20)\n            page: Page number (1-based, default 1)\n            oc: Optional OC override (defaults to session config or env)\n            type: Response format - \"HTML\", \"XML\", or \"JSON\" (default \"XML\")\n            sort: Sort order\n            date: Announcement date (YYYYMMDD)\n            org: Ministry/department code filter\n            knd: Law type filter\n\n        Returns:\n            Search results with law list or error\n        ",
              "inputSchema": {
                "properties": {
                  "query": {
                    "title": "Query",
                    "type": "string"
                  },
                  "display": {
                    "default": 20,
                    "title": "Display",
                    "type": "integer"
                  },
                  "page": {
                    "default": 1,
                    "title": "Page",
                    "type": "integer"
                  },
                  "oc": {
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "null"
                      }
                    ],
                    "default": null,
                    "title": "Oc"
                  },
                  "type": {
                    "default": "XML",
                    "title": "Type",
                    "type": "string"
                  },
                  "sort": {
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "null"
                      }
                    ],
                    "default": null,
                    "title": "Sort"
                  },
                  "date": {
                    "anyOf": [
                      {
                        "type": "integer"
                      },
                      {
                        "type": "null"
                      }
                    ],
                    "default": null,
                    "title": "Date"
                  },
                  "org": {
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "null"
                      }
                    ],
                    "default": null,
                    "title": "Org"
                  },
                  "knd": {
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "null"
                      }
                    ],
                    "default": null,
                    "title": "Knd"
                  }
                },
                "required": [
                  "query"
                ],
                "title": "law_searchArguments",
                "type": "object"
              }
            },
            {
              "name": "eflaw_service",
              "description": "\n        Retrieve full law content by effective date (시행일 기준 법령 본문 조회).\n\n        Retrieves the complete text of a law organized by effective date.\n        Use this to get the full content of a specific law.\n\n        Args:\n            id: Law ID (either id or mst is required)\n            mst: Law serial number (MST/lsi_seq)\n            ef_yd: Effective date (YYYYMMDD) - required when using mst\n            jo: Article number (6 digits, e.g., \"000200\" for Article 2)\n            chr_cls_cd: Language code - \"010202\" (Korean, default) or \"010201\" (Original)\n            oc: Optional OC override (defaults to session config or env)\n            type: Response format - \"HTML\", \"XML\", or \"JSON\" (default \"XML\")\n\n        Returns:\n            Full law content or error\n\n        Examples:\n            Retrieve law by ID:\n            >>> eflaw_service(id=\"1747\", type=\"XML\")\n\n            Retrieve law by MST with effective date:\n            >>> eflaw_service(mst=\"166520\", ef_yd=20151007, type=\"XML\")\n\n            Retrieve specific article:\n            >>> eflaw_service(mst=\"166520\", ef_yd=20151007, jo=\"000300\", type=\"XML\")\n        ",
              "inputSchema": {
                "properties": {
                  "id": {
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "null"
                      }
                    ],
                    "default": null,
                    "title": "Id"
                  },
                  "mst": {
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "null"
                      }
                    ],
                    "default": null,
                    "title": "Mst"
                  },
                  "ef_yd": {
                    "anyOf": [
                      {
                        "type": "integer"
                      },
                      {
                        "type": "null"
                      }
                    ],
                    "default": null,
                    "title": "Ef Yd"
                  },
                  "jo": {
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "null"
                      }
                    ],
                    "default": null,
                    "title": "Jo"
                  },
                  "chr_cls_cd": {
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "null"
                      }
                    ],
                    "default": null,
                    "title": "Chr Cls Cd"
                  },
                  "oc": {
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "null"
                      }
                    ],
                    "default": null,
                    "title": "Oc"
                  },
                  "type": {
                    "default": "XML",
                    "title": "Type",
                    "type": "string"
                  }
                },
                "title": "eflaw_serviceArguments",
                "type": "object"
              }
            },
            {
              "name": "law_service",
              "description": "\n        Retrieve full law content by announcement date (공포일 기준 법령 본문 조회).\n\n        Retrieves the complete text of a law organized by announcement (publication) date.\n\n        Args:\n            id: Law ID (either id or mst is required)\n            mst: Law serial number (MST)\n            lm: Law modification parameter\n            ld: Law date parameter (YYYYMMDD)\n            ln: Law number parameter\n            jo: Article number (6 digits)\n            lang: Language - \"KO\" (Korean) or \"ORI\" (Original)\n            oc: Optional OC override (defaults to session config or env)\n            type: Response format - \"HTML\", \"XML\", or \"JSON\" (default \"XML\")\n\n        Returns:\n            Full law content or error\n\n        Examples:\n            Retrieve law by ID:\n            >>> law_service(id=\"009682\", type=\"XML\")\n\n            Retrieve law by MST:\n            >>> law_service(mst=\"261457\", type=\"XML\")\n        ",
              "inputSchema": {
                "properties": {
                  "id": {
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "null"
                      }
                    ],
                    "default": null,
                    "title": "Id"
                  },
                  "mst": {
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "null"
                      }
                    ],
                    "default": null,
                    "title": "Mst"
                  },
                  "lm": {
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "null"
                      }
                    ],
                    "default": null,
                    "title": "Lm"
                  },
                  "ld": {
                    "anyOf": [
                      {
                        "type": "integer"
                      },
                      {
                        "type": "null"
                      }
                    ],
                    "default": null,
                    "title": "Ld"
                  },
                  "ln": {
                    "anyOf": [
                      {
                        "type": "integer"
                      },
                      {
                        "type": "null"
                      }
                    ],
                    "default": null,
                    "title": "Ln"
                  },
                  "jo": {
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "null"
                      }
                    ],
                    "default": null,
                    "title": "Jo"
                  },
                  "lang": {
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "null"
                      }
                    ],
                    "default": null,
                    "title": "Lang"
                  },
                  "oc": {
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "null"
                      }
                    ],
                    "default": null,
                    "title": "Oc"
                  },
                  "type": {
                    "default": "XML",
                    "title": "Type",
                    "type": "string"
                  }
                },
                "title": "law_serviceArguments",
                "type": "object"
              }
            },
            {
              "name": "eflaw_josub",
              "description": "\n        Query specific article/paragraph by effective date (시행일 기준 조·항·호·목 조회).\n\n        Retrieves specific sections (article, paragraph, item, subitem) of a law\n        organized by effective date.\n\n        Args:\n            id: Law ID (either id or mst is required)\n            mst: Law serial number (MST)\n            ef_yd: Effective date (YYYYMMDD) - required when using mst\n            jo: Article number (6 digits, e.g., \"000300\")\n            hang: Paragraph number (6 digits, e.g., \"000100\")\n            ho: Item number (6 digits, e.g., \"000200\")\n            mok: Subitem (UTF-8 encoded, e.g., \"다\")\n            oc: Optional OC override (defaults to session config or env)\n            type: Response format - \"HTML\", \"XML\", or \"JSON\" (default \"XML\")\n\n        Returns:\n            Specific law section content or error\n\n        Examples:\n            Query article/paragraph/item/subitem:\n            >>> eflaw_josub(\n            ...     mst=\"193412\",\n            ...     ef_yd=20171019,\n            ...     jo=\"000300\",\n            ...     hang=\"000100\",\n            ...     ho=\"000200\",\n            ...     mok=\"다\",\n            ...     type=\"XML\"\n            ... )\n        ",
              "inputSchema": {
                "properties": {
                  "id": {
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "null"
                      }
                    ],
                    "default": null,
                    "title": "Id"
                  },
                  "mst": {
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "null"
                      }
                    ],
                    "default": null,
                    "title": "Mst"
                  },
                  "ef_yd": {
                    "anyOf": [
                      {
                        "type": "integer"
                      },
                      {
                        "type": "null"
                      }
                    ],
                    "default": null,
                    "title": "Ef Yd"
                  },
                  "jo": {
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "null"
                      }
                    ],
                    "default": null,
                    "title": "Jo"
                  },
                  "hang": {
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "null"
                      }
                    ],
                    "default": null,
                    "title": "Hang"
                  },
                  "ho": {
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "null"
                      }
                    ],
                    "default": null,
                    "title": "Ho"
                  },
                  "mok": {
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "null"
                      }
                    ],
                    "default": null,
                    "title": "Mok"
                  },
                  "oc": {
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "null"
                      }
                    ],
                    "default": null,
                    "title": "Oc"
                  },
                  "type": {
                    "default": "XML",
                    "title": "Type",
                    "type": "string"
                  }
                },
                "title": "eflaw_josubArguments",
                "type": "object"
              }
            },
            {
              "name": "law_josub",
              "description": "\n        Query specific article/paragraph by announcement date (공포일 기준 조·항·호·목 조회).\n\n        Retrieves specific sections (article, paragraph, item, subitem) of a law\n        organized by announcement (publication) date.\n\n        Args:\n            id: Law ID (either id or mst is required)\n            mst: Law serial number (MST)\n            jo: Article number (6 digits, e.g., \"000300\")\n            hang: Paragraph number (6 digits, e.g., \"000100\")\n            ho: Item number (6 digits, e.g., \"000200\")\n            mok: Subitem (UTF-8 encoded, e.g., \"다\")\n            oc: Optional OC override (defaults to session config or env)\n            type: Response format - \"HTML\", \"XML\", or \"JSON\" (default \"XML\")\n\n        Returns:\n            Specific law section content or error\n\n        Examples:\n            Query article/paragraph/item/subitem:\n            >>> law_josub(\n            ...     id=\"001823\",\n            ...     jo=\"000300\",\n            ...     hang=\"000100\",\n            ...     ho=\"000200\",\n            ...     mok=\"다\",\n            ...     type=\"XML\"\n            ... )\n        ",
              "inputSchema": {
                "properties": {
                  "id": {
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "null"
                      }
                    ],
                    "default": null,
                    "title": "Id"
                  },
                  "mst": {
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "null"
                      }
                    ],
                    "default": null,
                    "title": "Mst"
                  },
                  "jo": {
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "null"
                      }
                    ],
                    "default": null,
                    "title": "Jo"
                  },
                  "hang": {
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "null"
                      }
                    ],
                    "default": null,
                    "title": "Hang"
                  },
                  "ho": {
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "null"
                      }
                    ],
                    "default": null,
                    "title": "Ho"
                  },
                  "mok": {
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "null"
                      }
                    ],
                    "default": null,
                    "title": "Mok"
                  },
                  "oc": {
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "null"
                      }
                    ],
                    "default": null,
                    "title": "Oc"
                  },
                  "type": {
                    "default": "XML",
                    "title": "Type",
                    "type": "string"
                  }
                },
                "title": "law_josubArguments",
                "type": "object"
              }
            }
          ]
        }
      },
      "elapsed_ms": 1
    },
    {
      "timestamp": "2025-11-07T13:53:31.628147",
      "method": "tools/call:eflaw_search",
      "params": {
        "tool": "eflaw_search",
        "arguments": {
          "query": "자동차관리법",
          "display": 5,
          "type": "XML"
        }
      },
      "response": {
        "jsonrpc": "2.0",
        "id": 3,
        "result": {
          "content": [
            {
              "type": "text",
              "text": "{\n  \"status\": \"ok\",\n  \"request_id\": \"1152058b-0b60-491c-a124-a75a83408290\",\n  \"upstream_type\": \"XML\",\n  \"raw_content\": \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?><LawSearch><target>eflaw</target><키워드>자동차관리법</키워드><section>lawNm</section><totalCnt>413</totalCnt><page>1</page><numOfRows>5</numOfRows><resultCode>00</resultCode><resultMsg>success</resultMsg><law id=\\\"1\\\"><법령일련번호>107433</법령일련번호><현행연혁코드>연혁</현행연혁코드><법령명한글><![CDATA[서식설계기준 변경에 따른 자동차관리법 시행규칙 등 일부개정령]]></법령명한글><법령약칭명><![CDATA[]]></법령약칭명><법령ID>011268</법령ID><공포일자>20100830</공포일자><공포번호>00277</공포번호><제개정구분명>일괄개정</제개정구분명><소관부처코드></소관부처코드><소관부처명></소관부처명><법령구분명>국토해양부령</법령구분명><공동부령정보></공동부령정보><시행일자>20100830</시행일자><자법타법여부></자법타법여부><법령상세링크>/DRF/lawService.do?OC=ddongle0205&amp;target=eflaw&amp;MST=107433&amp;type=HTML&amp;mobileYn=&amp;efYd=20100830</법령상세링크></law><law id=\\\"2\\\"><법령일련번호>266643</법령일련번호><현행연혁코드>시행예정</현행연혁코드><법령명한글><![CDATA[자동차관리법]]></법령명한글><법령약칭명><![CDATA[]]></법령약칭명><법령ID>001747</법령ID><공포일자>20241203</공포일자><공포번호>20554</공포번호><제개정구분명>일부개정</제개정구분명><소관부처코드>1613000</소관부처코드><소관부처명>국토교통부</소관부처명><법령구분명>법률</법령구분명><공동부령정보></공동부령정보><시행일자>20251204</시행일자><자법타법여부></자법타법여부><법령상세링크>/DRF/lawService.do?OC=ddongle0205&amp;target=eflaw&amp;MST=266643&amp;type=HTML&amp;mobileYn=&amp;efYd=20251204</법령상세링크></law><law id=\\\"3\\\"><법령일련번호>277015</법령일련번호><현행연혁코드>현행</현행연혁코드><법령명한글><![CDATA[자동차관리법]]></법령명한글><법령약칭명><![CDATA[]]></법령약칭명><법령ID>001747</법령ID><공포일자>20251001</공포일자><공포번호>21065</공포번호><제개정구분명>타법개정</제개정구분명><소관부처코드>1613000</소관부처코드><소관부처명>국토교통부</소관부처명><법령구분명>법률</법령구분명><공동부령정보></공동부령정보><시행일자>20251001</시행일자><자법타법여부></자법타법여부><법령상세링크>/DRF/lawService.do?OC=ddongle0205&amp;target=eflaw&amp;MST=277015&amp;type=HTML&amp;mobileYn=&amp;efYd=20251001</법령상세링크></law><law id=\\\"4\\\"><법령일련번호>260419</법령일련번호><현행연혁코드>연혁</현행연혁코드><법령명한글><![CDATA[자동차관리법]]></법령명한글><법령약칭명><![CDATA[]]></법령약칭명><법령ID>001747</법령ID><공포일자>20240213</공포일자><공포번호>20298</공포번호><제개정구분명>일부개정</제개정구분명><소관부처코드>1613000</소관부처코드><소관부처명>국토교통부</소관부처명><법령구분명>법률</법령구분명><공동부령정보></공동부령정보><시행일자>20250814</시행일자><자법타법여부></자법타법여부><법령상세링크>/DRF/lawService.do?OC=ddongle0205&amp;target=eflaw&amp;MST=260419&amp;type=HTML&amp;mobileYn=&amp;efYd=20250814</법령상세링크></law><law id=\\\"5\\\"><법령일련번호>261151</법령일련번호><현행연혁코드>연혁</현행연혁코드><법령명한글><![CDATA[자동차관리법]]></법령명한글><법령약칭명><![CDATA[]]></법령약칭명><법령ID>001747</법령ID><공포일자>20240319</공포일자><공포번호>20391</공포번호><제개정구분명>타법개정</제개정구분명><소관부처코드>1613000</소관부처코드><소관부처명>국토교통부</소관부처명><법령구분명>법률</법령구분명><공동부령정보></공동부령정보><시행일자>20250320</시행일자><자법타법여부></자법타법여부><법령상세링크>/DRF/lawService.do?OC=ddongle0205&amp;target=eflaw&amp;MST=261151&amp;type=HTML&amp;mobileYn=&amp;efYd=20250320</법령상세링크></law></LawSearch>\\n\\r\\n\"\n}"
            }
          ],
          "isError": false
        }
      },
      "elapsed_ms": 98
    }
  ],
  "llm_interactions": [
    {
      "timestamp": "2025-11-07T13:53:33.436144",
      "model": "gemini-2.5-flash",
      "prompt": "\n            한국의 자동차 관련 법령을 검색해주세요.\n            특히 자동차관리법에 대한 정보를 찾아주세요.\n\n            You have access to tools to search Korean law information.\n            Use the eflaw_search tool to search for automobile-related laws.\n            ",
      "response": "eflaw_search:\n[\n  {\n    \"query\": \"자동차관리법\"\n  }\n]\n",
      "tool_calls": []
    }
  ],
  "results": {
    "test_01_initialization": {
      "status": "PASS",
      "session_id": "7b7abec52ced4eea8779a8bcfd79b855",
      "protocol_version": "2024-11-05"
    },
    "test_02_list_tools": {
      "status": "PASS",
      "tool_count": 6,
      "tools": [
        "eflaw_search",
        "law_search",
        "eflaw_service",
        "law_service",
        "eflaw_josub",
        "law_josub"
      ]
    },
    "test_03_direct_tool_call": {
      "status": "PASS",
      "tool": "eflaw_search",
      "query": "자동차관리법",
      "result_status": "ok",
      "result_summary": {
        "status": "ok",
        "request_id": "1152058b-0b60-491c-a124-a75a83408290",
        "has_data": false,
        "error_code": null
      }
    },
    "test_04_gemini_tool_usage": {
      "status": "PASS",
      "model": "gemini-2.5-flash",
      "response_length": 48
    },
    "test_05_error_handling": {
      "status": "SKIP",
      "reason": "Smithery framework handles missing session config with 422 validation",
      "note": "This is expected behavior - required fields validated at protocol level"
    }
  },
  "end_time": "2025-11-07T13:53:33.436177",
  "duration_seconds": 1.923806
}